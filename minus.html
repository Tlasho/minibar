<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Minibar - ·Éõ·Éò·Éú·É£·É°·Éî·Éë·Éò</title>
<style>
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: Arial, sans-serif;
  background: #0b0f1a;
  color: #e5e7eb;
}

.minus-page {
  padding: 20px;
  min-height: 100vh;
  background: linear-gradient(135deg, #0b0f1a 0%, #1e293b 100%);
}

.minus-container {
  max-width: 800px;
  margin: 60px auto 0;
  background: rgba(15, 23, 42, 0.9);
  padding: 30px;
  border-radius: 16px;
  border: 2px solid #475569;
}

.minus-title {
  color: #e5e7eb;
  font-size: 32px;
  margin-bottom: 30px;
  text-align: center;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
}

.minus-controls {
  display: flex;
  gap: 15px;
  margin-bottom: 30px;
  flex-wrap: wrap;
  justify-content: center;
}

.save-button, .clear-button, .back-button {
  padding: 12px 20px;
  border: none;
  border-radius: 10px;
  font-size: 16px;
  font-weight: bold;
  cursor: pointer;
  transition: all 0.3s ease;
}

.save-button {
  background: #10b981;
  color: white;
}

.save-button:hover {
  background: #059669;
  transform: translateY(-2px);
}

.clear-button {
  background: #ef4444;
  color: white;
}

.clear-button:hover {
  background: #dc2626;
  transform: translateY(-2px);
}

.back-button {
  background: #3b82f6;
  color: white;
}

.back-button:hover {
  background: #2563eb;
  transform: translateY(-2px);
}

.minus-list {
  background: rgba(30, 41, 59, 0.5);
  border-radius: 12px;
  padding: 20px;
  min-height: 300px;
  max-height: 500px;
  overflow-y: auto;
}

.minus-category {
  margin-bottom: 30px;
}

.category-title {
  color: #60a5fa;
  font-size: 20px;
  font-weight: bold;
  margin-bottom: 15px;
  padding-bottom: 8px;
  border-bottom: 2px solid #475569;
  display: flex;
  align-items: center;
  gap: 10px;
}

.minus-item {
  background: rgba(15, 23, 42, 0.8);
  padding: 15px;
  margin-bottom: 10px;
  border-radius: 10px;
  border: 1px solid #475569;
  display: flex;
  justify-content: space-between;
  align-items: center;
  transition: all 0.3s ease;
}

.minus-item:hover {
  background: rgba(30, 41, 59, 0.9);
}

.product-info {
  display: flex;
  align-items: center;
  gap: 15px;
  flex: 1;
}

.product-image {
  width: 50px;
  height: 50px;
  border-radius: 8px;
  object-fit: cover;
  border: 2px solid #475569;
}

.product-name {
  color: #e5e7eb;
  font-size: 16px;
  font-weight: bold;
}

.counter-controls {
  display: flex;
  align-items: center;
  gap: 15px;
}

.counter-button {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  border: 2px solid #475569;
  background: rgba(30, 41, 59, 0.8);
  color: #e5e7eb;
  font-size: 20px;
  font-weight: bold;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
}

.counter-button:hover {
  transform: scale(1.1);
}

.counter-button.minus {
  background: rgba(239, 68, 68, 0.2);
  border-color: #ef4444;
  color: #f87171;
}

.counter-button.minus:hover {
  background: rgba(239, 68, 68, 0.3);
}

.counter-button.plus {
  background: rgba(16, 185, 129, 0.2);
  border-color: #10b981;
  color: #34d399;
}

.counter-button.plus:hover {
  background: rgba(16, 185, 129, 0.3);
}

.counter-display {
  min-width: 60px;
  text-align: center;
  font-size: 24px;
  font-weight: bold;
  color: #e5e7eb;
  padding: 5px 10px;
  border-radius: 8px;
  background: rgba(30, 41, 59, 0.5);
}

.negative-count {
  color: #ef4444;
}

.positive-count {
  color: #10b981;
}

.zero-count {
  color: #94a3b8;
}

.empty-minus {
  text-align: center;
  padding: 40px;
  color: #94a3b8;
}

.summary-box {
  background: rgba(59, 130, 246, 0.15);
  border: 2px solid #3b82f6;
  border-radius: 12px;
  padding: 20px;
  margin-top: 30px;
  text-align: center;
}

.summary-title {
  color: #60a5fa;
  font-size: 18px;
  font-weight: bold;
  margin-bottom: 10px;
}

.summary-total {
  color: #e5e7eb;
  font-size: 32px;
  font-weight: bold;
}

.negative-summary {
  background: rgba(239, 68, 68, 0.15);
  border-color: #ef4444;
}

.negative-summary .summary-title {
  color: #f87171;
}

.back-arrow {
  position: fixed;
  top: 20px;
  left: 20px;
  font-size: 18px;
  color: #e5e7eb;
  cursor: pointer;
  background: rgba(30, 41, 59, 0.8);
  padding: 10px 15px;
  border-radius: 12px;
  border: 2px solid #475569;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  gap: 5px;
  z-index: 100;
  text-decoration: none;
}

.back-arrow:hover {
  background: rgba(51, 65, 85, 0.9);
  transform: translateX(-3px);
}

/* Total counts display */
.total-counts {
  display: flex;
  justify-content: space-around;
  margin-top: 20px;
  flex-wrap: wrap;
  gap: 15px;
}

.total-box {
  background: rgba(30, 41, 59, 0.8);
  padding: 15px;
  border-radius: 10px;
  border: 2px solid #475569;
  min-width: 150px;
  text-align: center;
}

.total-label {
  color: #94a3b8;
  font-size: 14px;
  margin-bottom: 5px;
}

.total-value {
  color: #e5e7eb;
  font-size: 24px;
  font-weight: bold;
}

.total-positive .total-value {
  color: #10b981;
}

.total-negative .total-value {
  color: #ef4444;
}

@media (max-width: 768px) {
  .minus-container {
    margin-top: 80px;
    padding: 20px;
  }
  
  .minus-title {
    font-size: 24px;
  }
  
  .minus-item {
    flex-direction: column;
    gap: 15px;
    align-items: stretch;
  }
  
  .product-info {
    justify-content: center;
    text-align: center;
  }
  
  .counter-controls {
    justify-content: center;
  }
  
  .back-arrow {
    top: 15px;
    left: 15px;
    padding: 8px 12px;
  }
}
</style>
</head>

<body class="minus-page">

<a href="main.html" class="back-arrow">‚Üê ·É£·Éô·Éê·Éú</a>

<div class="minus-container">
  <h1 class="minus-title"> ·Éõ·Éò·Éú·É£·É°·Éî·Éë·Éò</h1>
  
  <div class="minus-controls">
    <button class="clear-button" id="clearButton">üóëÔ∏è ·Éí·Éê·É°·É£·É§·Éó·Éê·Éï·Éî·Éë·Éê</button>
    <button class="back-button" onclick="window.location.href='inventory.html'">üìã ·Éò·Éú·Éï·Éî·Éú·É¢·Éê·É†·Éò</button>
  </div>
  
  <div class="minus-list" id="minusList">
    <!-- Minus items will be loaded here -->
  </div>
  
  <div class="total-counts" id="totalCounts">
    <!-- Total counts will be loaded here -->
  </div>
  
  <div class="summary-box" id="summaryBox" style="display: none;">
    <div class="summary-title">·É°·É£·Éö ·Éõ·Éò·Éú·É£·É°·Éî·Éë·Éò</div>
    <div class="summary-total" id="summaryTotal">0</div>
  </div>
</div>

<script>
// Product database
const productDatabase = {
  'above': [
    { id: 1, name: "Cola", image: "https://product.hstatic.net/1000282430/product/nuoc-ngot-coca-cola-nhat-500ml_f61289e9a50d41398d9711800846f9b0_grande.jpg" },
    { id: 2, name: "Redbull", image: "https://images.europroduct.ge/prod/7d1a791158/9a46837c83b04917aa53b2e5af25aed2_90376504.jpg?w=580" },
    { id: 3, name: "Chips", image: "https://m.media-amazon.com/images/I/61w6Gc8ox6L.jpg" },
    { id: 4, name: "Nuts", image: "https://cdn.2nabiji.ge/products/mitsis-thkhili-ola-mokhaluli-mariliani-300x300.webp" },
    { id: 5, name: "Honey", image: "https://www.trubeehoney.com/cdn/shop/products/MINI_1024x1024.jpg?v=1620842945" }
  ],
  
  'below': [
    { id: 7, name: "Water", image: "https://www.aversi.ge/uploads/matimg/293a37597e5b2ad1120984e131d7e82a.jpg" },
    { id: 8, name: "Heineken", image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRfFQEReT42FKmj-5xxd6fmHEZhzop7IYXzsw&s" },
    { id: 9, name: "Fruit Juice", image: "https://nikorasupermarket.ge/modules/current_promotions/uploads/16794.png" },
    { id: 10, name: "nabeghlavi", image: "https://imagedelivery.net/d_EE26O5eWcJDRYn-qMBOg/3084d5f4-c3ec-40f4-05f5-c31c8cda5200/public" },
    { id: 11, name: "Tsinandali", image: "https://8000vintages.ge/images/thumbnails/1200/1800/detailed/18/keburia_tsinandali_2022.png" },
    { id: 12, name: "Khvanchkara", image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcROcYIQbB-ZZSjivKhrV9qU3yTMucHdBEobAg&s" },
    { id: 13, name: "Saperavi", image: "https://8000vintages.ge/images/thumbnails/1200/1800/detailed/18/keburia_saperavi_2022.png" },
    { id: 14, name: "Chacha", image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT1a0_3_lMeP_ps2j3oViU4CPpWHBrTlsiIHA&s" }
  ],

  'door-1': [
    { id: 30, name: "Rafaelo", image: "https://www.axonprofil.de/static/items/520/17264_1.jpg" },
    { id: 31, name: "M&M", image: "https://kcc.org.hk/wp-content/uploads/2023/09/MM20Chocolate20Peanut2037g.jpg" },
    { id: 32, name: "Snickers", image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTSWZJpdqkpCmCBkEby1N1Sh0PeYbFvI8f7Ag&s" }
  ],
  
  'door-2': [
    { id: 40, name: "Jameson", image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRzDOSSfqZfk056iMhz4Td1WpL6cglxeq9mLQ&s" },
    { id: 41, name: "Finlandia", image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS2FeIzqvdhrRBCn1h18oijS9aurvuXndz7nA&s" },
    { id: 42, name: "Johnnie Walker", image: "https://www.raschvin.com/wp-content/uploads/2022/05/rSL000843.jpg" },
    { id: 43, name: "Henessy", image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT1tipPf_0i53dVnnKwP0p2LwCVBHmlNwcbhg&s" },
    { id: 44, name: "Jack Daniels", image: "https://www.cebooze.com/app/uploads/2021/08/Jack-Daniel-Mini.jpg" },
    { id: 45, name: "Sarajishvili", image: "https://winetime.com.ua/storage/fab93e692c41c3ac030b6c147b5eed12.jpeg" }
  ]
};

// Casino products
const casinoProducts = {
  'below': [
    { id: 15, name: "moet", image: "https://cdn11.bigcommerce.com/s-9hu30/images/stencil/2048x2048/products/482/2416/moet_and_chandon_brut_imperial_187ml_mini_split__85900.1637085078.jpg?c=2" }
  ],
  'door-2': [
    { id: 46, name: "glen moray", image: "https://www.astorwines.com/images/items/01024.jpg" }
  ]
};

const MinusManager = {
  getMinusData() {
    const minusData = localStorage.getItem('minusData');
    return minusData ? JSON.parse(minusData) : {};
  },
  
  saveMinusData(data) {
    localStorage.setItem('minusData', JSON.stringify(data));
    return true;
  },
  
  clearMinusData() {
    localStorage.setItem('minusData', JSON.stringify({}));
    return true;
  },
  
  updateProductCount(productId, change) {
    const data = this.getMinusData();
    const current = data[productId] || 0;
    const newCount = current + change;
    
    if (newCount === 0) {
      delete data[productId];
    } else {
      data[productId] = newCount;
    }
    
    this.saveMinusData(data);
    return newCount;
  },
  
  resetProductCount(productId) {
    const data = this.getMinusData();
    delete data[productId];
    this.saveMinusData(data);
    return 0;
  },
  
  getSummary() {
    const data = this.getMinusData();
    let total = 0;
    let positiveTotal = 0;
    let negativeTotal = 0;
    let itemCount = 0;
    
    Object.values(data).forEach(count => {
      total += count;
      if (count > 0) {
        positiveTotal += count;
      } else if (count < 0) {
        negativeTotal += Math.abs(count);
      }
      if (count !== 0) {
        itemCount++;
      }
    });
    
    return {
      total,
      positiveTotal,
      negativeTotal,
      itemCount
    };
  }
};

document.addEventListener('DOMContentLoaded', function() {
  const minusList = document.getElementById('minusList');
  const clearButton = document.getElementById('clearButton');
  const summaryBox = document.getElementById('summaryBox');
  const summaryTotal = document.getElementById('summaryTotal');
  const totalCounts = document.getElementById('totalCounts');
  
  function loadMinusPage() {
    const minusData = MinusManager.getMinusData();
    const allProducts = getAllProducts();
    
    if (allProducts.length === 0) {
      minusList.innerHTML = `
        <div class="empty-minus">
          <p>·Éû·É†·Éù·Éì·É£·É•·É¢·Éî·Éë·Éò ·Éê·É† ·Éõ·Éù·Éò·É´·Éî·Éë·Éú·Éê</p>
        </div>
      `;
      updateSummary();
      return;
    }
    
    minusList.innerHTML = '';
    
    // Create category sections
    const categories = [
      { id: 'above', title: '·Éñ·Éî·Éì·Éê ·Éó·Éê·É†·Éù' },
      { id: 'below', title: '·É•·Éï·Éî·Éì·Éê ·Éó·Éê·É†·Éù' },
      { id: 'door-1', title: '·Éô·Éê·É†·Éò·É° ·Éó·Éê·É†·Éù 1' },
      { id: 'door-2', title: '·Éô·Éê·É†·Éò·É° ·Éó·Éê·É†·Éù 2' }
    ];
    
    categories.forEach(category => {
      const categoryProducts = productDatabase[category.id] || [];
      const casinoCategoryProducts = casinoProducts[category.id] || [];
      const allCategoryProducts = [...categoryProducts, ...casinoCategoryProducts];
      
      if (allCategoryProducts.length > 0) {
        const categoryElement = document.createElement('div');
        categoryElement.className = 'minus-category';
        
        // Sort products by name
        allCategoryProducts.sort((a, b) => a.name.localeCompare(b.name));
        
        const itemsHTML = allCategoryProducts.map(product => {
          const currentCount = minusData[product.id] || 0;
          const countClass = currentCount > 0 ? 'positive-count' : 
                            currentCount < 0 ? 'negative-count' : 'zero-count';
          
          return `
            <div class="minus-item" data-product-id="${product.id}">
              <div class="product-info">
                <img src="${product.image}" alt="${product.name}" class="product-image">
                <span class="product-name">${product.name}</span>
              </div>
              <div class="counter-controls">
                <button class="counter-button minus" onclick="updateCount(${product.id}, -1)">‚àí</button>
                <div class="counter-display ${countClass}">${currentCount}</div>
                <button class="counter-button plus" onclick="updateCount(${product.id}, 1)">+</button>
              </div>
            </div>
          `;
        }).join('');
        
        categoryElement.innerHTML = `
          <div class="category-title">
            <span>${category.title}</span>
            <span style="font-size: 14px; color: #94a3b8;">(${allCategoryProducts.length} ·Éû·É†·Éù·Éì·É£·É•·É¢·Éò)</span>
          </div>
          ${itemsHTML}
        `;
        
        minusList.appendChild(categoryElement);
      }
    });
    
    updateSummary();
  }
  
  function getAllProducts() {
    const allProducts = [];
    
    // Add all regular products
    Object.values(productDatabase).forEach(category => {
      allProducts.push(...category);
    });
    
    // Add all casino products
    Object.values(casinoProducts).forEach(category => {
      allProducts.push(...category);
    });
    
    return allProducts;
  }
  
  function updateSummary() {
    const summary = MinusManager.getSummary();
    
    // Update total counts display
    totalCounts.innerHTML = `
      </div>
      <div class="total-box total-positive">
        <div class="total-label">·Éû·Éö·É£·É°·Éî·Éë·Éò</div>
        <div class="total-value">+${summary.positiveTotal}</div>
      </div>
      <div class="total-box total-negative">
        <div class="total-label">·Éõ·Éò·Éú·É£·É°·Éî·Éë·Éò</div>
        <div class="total-value">-${summary.negativeTotal}</div>
      </div>
      
    `;
    
    // Update summary box
  }
  
  // Global functions for button clicks
  window.updateCount = function(productId, change) {
    const newCount = MinusManager.updateProductCount(productId, change);
    
    // Update the display
    const item = document.querySelector(`.minus-item[data-product-id="${productId}"]`);
    if (item) {
      const display = item.querySelector('.counter-display');
      const countClass = newCount > 0 ? 'positive-count' : 
                        newCount < 0 ? 'negative-count' : 'zero-count';
      
      display.textContent = newCount;
      display.className = `counter-display ${countClass}`;
    }
    
    updateSummary();
  };
  
  window.resetCount = function(productId) {
    MinusManager.resetProductCount(productId);
    
    // Update the display
    const item = document.querySelector(`.minus-item[data-product-id="${productId}"]`);
    if (item) {
      const display = item.querySelector('.counter-display');
      display.textContent = 0;
      display.className = 'counter-display zero-count';
    }
    
    updateSummary();
  };
  
  
  clearButton.addEventListener('click', function() {
    if (confirm('·Éì·Éê·É†·É¨·Éõ·É£·Éú·Éî·Éë·É£·Éö·Éò ·ÉÆ·Éê·É†? ·Éß·Éï·Éî·Éö·Éê ·Éõ·Éù·Éú·Éê·É™·Éî·Éõ·Éò ·É¨·Éê·Éò·É®·Éö·Éî·Éë·Éê')) {
      MinusManager.clearMinusData();
      loadMinusPage();
      showNotification('·Éí·Éê·É°·É£·É§·Éó·Éê·Éï·Éî·Éë·É£·Éö·Éò·Éê', '#ef4444');
    }
  });
  
  function showNotification(message, color = '#10b981') {
    const existingNotification = document.querySelector('.custom-notification');
    if (existingNotification) existingNotification.remove();
    
    const notification = document.createElement('div');
    notification.className = 'custom-notification';
    notification.style.cssText = `
      position: fixed;
      top: 80px;
      right: 20px;
      background: ${color}20;
      color: ${color === '#10b981' ? '#a7f3d0' : '#fecaca'};
      padding: 12px 20px;
      border-radius: 8px;
      border: 2px solid ${color}60;
      z-index: 1000;
      font-size: 14px;
      font-weight: bold;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      animation: slideIn 0.3s ease;
    `;
    
    notification.textContent = message;
    document.body.appendChild(notification);
    
    setTimeout(() => {
      notification.style.animation = 'slideOut 0.3s ease';
      setTimeout(() => notification.remove(), 300);
    }, 2000);
  }
  
  // Add animation styles
  const style = document.createElement('style');
  style.textContent = `
    @keyframes slideIn {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
    @keyframes slideOut {
      from { transform: translateX(0); opacity: 1; }
      to { transform: translateX(100%); opacity: 0; }
    }
  `;
  document.head.appendChild(style);
  
  // Load data on page load
  loadMinusPage();
});
</script>

</body>
</html>